<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nino's Trip</title>

    <!-- íŒŒë¹„ì½˜ ì„¤ì • -->
    <link rel="icon" href="{{ url_for('static', filename='icons/icon_32x32.png') }}" type="image/png">

    <!-- PWA ì„¤ì • -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    
    <!-- ì•„ì´ì½˜ ì„¤ì • -->
    <link rel="icon" type="image/png" sizes="192x192" href="{{ url_for('static', filename='icons/icon_192x192.png') }}">
    <link rel="icon" type="image/png" sizes="512x512" href="{{ url_for('static', filename='icons/icon_512x512.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/icon_192x192.png') }}">
    
    <!-- CSS íŒŒì¼ ì—°ê²° -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- Google Analytics ì½”ë“œ -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4RKD217X33"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'G-4RKD217X33');
    </script>
</head>
<body>
    <header>
        <h1>NeStory</h1>

        <!-- í–„ë²„ê±° ë©”ë‰´ ì•„ì´ì½˜ -->
        <div class="menu-icon" onclick="toggleMenu()">
            â˜° <!-- ì—¬ê¸°ì„œ â˜°ëŠ” í–„ë²„ê±° ë©”ë‰´ ì•„ì´ì½˜ì„ ì˜ë¯¸í•˜ëŠ” íŠ¹ìˆ˜ ë¬¸ìì…ë‹ˆë‹¤ -->
        </div>
        
        <!-- ê°€ë¡œ ë°°ì—´ëœ íƒ­ -->
        <nav>
            <ul class="tabs">
                <li class="tab" onclick="showContent('event')">ì´ë‹¬ì˜     ë„¤ì“° Pick</li>
                <li class="tab" onclick="showContent('crookey')">ê°€ì¡± ì—¬í–‰</li>
                <li class="tab" onclick="showContent('activity')">ì•¡í‹°ë¹„í‹°</li>
                <li class="tab" onclick="showContent('cafe')">ì¹´í˜</li>
                <li class="tab" onclick="showContent('kids-restaurant')">í‚¤ì¦ˆì‹ë‹¹</li>
                <li class="tab" onclick="showContent('culture-center')">ë¬¸í™”ì„¼í„°</li>
                <!-- <li class="tab" onclick="showContent('forest')">ìœ ì•„ìˆ²</li> -->
                <li class="tab" onclick="showContent('contact')">ë¬¸ì˜</li>
                <li class="tab" onclick="createShortcut()">ì¦ê²¨ì°¾ê¸°</li>
            </ul>
        </nav>
    </header>

    <section id="event" class="content-section" style="display: none;">
        <h2>í˜„ì¬ ì ê²€ ì¤‘ì…ë‹ˆë‹¤</h2>
        <!-- <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>ì‘ì„±ì¼</th>
                        <th>ì¹´í…Œê³ ë¦¬</th>
                        <th>ì§€ì—­</th>
                        <th>í–‰ì‚¬ëª…</th>
                        <th>ë‚´ìš©</th>
                        <th>ì¥ì†Œ</th>
                        <th>ì¼ì‹œ</th>
                        <th>ëŒ€ìƒ</th>
                        <th>ì ‘ìˆ˜ê¸°ê°„</th>
                        <th>ë¬¸ì˜</th>
                        <th>ì‹ ì²­ ë§í¬</th>
                        <th>ê²Œì‹œë¬¼ ë§í¬</th>
                        <th>í˜ì´ì§€ ë§í¬</th>
                    </tr>
                </thead>
                <tbody>
                    {% for event in event_data %}
                    <tr>
                        <td data-label="ì‘ì„±ì¼"></td><td>{{ event.ì‘ì„±ì¼ }}</td>
                        <td data-label="ì¹´í…Œê³ ë¦¬"></td><td>{{ event.ì¹´í…Œê³ ë¦¬ }}</td>
                        <td data-label="ì§€ì—­"></td><td>{{ event.ì§€ì—­ }}</td>
                        <td data-label="í–‰ì‚¬ëª…"></td><td>{{ event.í–‰ì‚¬ëª… }}</td>
                        <td data-label="ë‚´ìš©"></td><td>{{ event.ë‚´ìš© }}</td>
                        <td data-label="ì¥ì†Œ"></td><td>{{ event.ì¥ì†Œ }}</td>
                        <td data-label="ì¼ì‹œ"></td><td>{{ event.ì¼ì‹œ or 'N/A' }}</td>
                        <td data-label="ëŒ€ìƒ"></td><td>{{ event.ëŒ€ìƒ or 'N/A' }}</td>
                        <td data-label="ì ‘ìˆ˜ê¸°ê°„"></td><td>{{ event.ì ‘ìˆ˜ê¸°ê°„ or 'N/A' }}</td>
                        <td data-label="ë¬¸ì˜"></td><td>{{ event.ë¬¸ì˜ or 'N/A' }}</td>
                        <td data-label="ì‹ ì²­ ë§í¬"></td><td><a href="{{ event.ì‹ ì²­ë§í¬ }}" target="_blank">{{ event.ì‹ ì²­ë§í¬ }}</a></td>
                        <td data-label="ê²Œì‹œë¬¼ ë§í¬"></td><td><a href="{{ event.ê²Œì‹œë¬¼ë§í¬ }}" target="_blank">{{ event.ê²Œì‹œë¬¼ë§í¬ }}</a></td>
                        <td data-label="í˜ì´ì§€ ë§í¬"></td><td><a href="{{ event.í˜ì´ì§€ë§í¬ }}" target="_blank">{{ event.í˜ì´ì§€ë§í¬ }}</a></td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="13">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div> -->
    </section>

    <section id="crookey" class="content-section" style="display: none;">
        <div class="search-container">
            <input type="text" id="trip-search" class="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />
            <button class="search-button" onclick="filterTableWithButton('trip-table', 'trip-search')">
                ğŸ”
            </button>
        </div>

        <div class="table-container">
            <table id="trip-table">
                <thead>
                    <tr>
                        <th>ì§€ì—­</th>
                        <th>ì¥ì†Œ</th>
                        <th>ì•Œì§œ íŒ</th>
                        <th>ë‚˜ì´</th>
                        <th>ê°€ê²©</th>
                        <th>ì‹¤ë‚´/ì‹¤ì™¸</th>
                    </tr>
                </thead>
                <tbody>
                    {% for trip in nino_trip_data %}
                    <tr>
                        <td data-label="ì§€ì—­">{{ trip.ì§€ì—­ }}</td>
                        <td data-label="ì¥ì†Œ"><a href="{{ trip.ë§í¬ }}" target="_blank">{{ trip.ì¥ì†Œ }}</a></td>
                        <td data-label="ì•Œì§œ íŒ" class="pre-wrap">{{ trip["ì•Œì§œ íŒ"] }}</td>
                        <td data-label="ë‚˜ì´">{{ trip.ë‚˜ì´ or 'N/A' }}</td>
                        <td data-label="ê°€ê²©">{{ trip.ê°€ê²© or 'N/A' }}</td>
                        <td data-label="ì‹¤ë‚´/ì‹¤ì™¸" class="pre-wrap">{{ trip["ì‹¤ë‚´/ì‹¤ì™¸"] }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="6">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    <!-- ë‹¤ë¥¸ ì½˜í…ì¸  ì˜ì—­ -->
    <section id="activity" class="content-section" style="display: none;">
        <h2>ë¬¼ë†€ì´ ì½˜í…ì¸ </h2>
        <!-- ë¬¼ë†€ì´ ê´€ë ¨ ë‚´ìš© ì¶”ê°€ -->
    </section>

    <section id="cafe" class="content-section" style="display: none;">
        <div class="search-container">
            <input type="text" id="cafe-search" class="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />
            <button class="search-button" onclick="filterTableWithButton('cafe-table', 'cafe-search')">
                ğŸ”
            </button>
        </div>

        <div class="table-container">
            <table id="cafe-table">
                <thead>
                    <tr>
                        <th>ì§€ì—­</th>
                        <th>ì¥ì†Œ</th>
                        <th>ì•Œì§œ íŒ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cafe in cafe_data %}
                    <tr>
                        <td data-label="ì§€ì—­">{{ cafe.ì§€ì—­ }}</td>
                        <td data-label="ì¥ì†Œ"><a href="{{ cafe.ë§í¬ }}" target="_blank">{{ cafe.ì¥ì†Œ }}</a></td>
                        <td data-label="ì•Œì§œ íŒ" class="pre-wrap">{{ cafe["ì•Œì§œ íŒ"] }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="3">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    <section id="kids-restaurant" class="content-section" style="display: none;">
        <div class="search-container">
            <input type="text" id="kids-restaurant-search" class="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />
            <button class="search-button" onclick="filterTableWithButton('kids-restaurant-table', 'kids-restaurant-search')">
                ğŸ”
            </button>
        </div>
        <div class="table-container">
            <table id="kids-restaurant-table">
                <thead>
                    <tr>
                        <th>ì¥ì†Œ</th>
                        <th>ì•Œì§œ íŒ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for kids_restaurant in kids_restaurant_data %}
                    <tr>
                        <td data-label="ì¥ì†Œ">
                            <a href="{{ kids_restaurant.ë§í¬ }}" target="_blank">{{ kids_restaurant.ì¥ì†Œ }}</a>
                        </td>
                        <td data-label="ì•Œì§œ íŒ" class="pre-wrap">{{ kids_restaurant["ì•Œì§œ íŒ"] or "N/A" }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="2">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    <section id="culture-center" class="content-section" style="display: none;">
        <div class="search-container">
            <input type="text" id="culture-center-search" class="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />
            <button class="search-button" onclick="filterTableWithButton('culture-center-table', 'culture-center-search')">
                ğŸ”
            </button>
        </div>
        <div class="table-container">
            <table id="culture-center-table">
                <thead>
                    <tr>
                        <th>ì¥ì†Œ</th>
                        <th>ì•Œì§œ íŒ</th>
                        <th>ë‚˜ì´</th>
                        <th>ì¢…ë¥˜</th>
                        <th>ê°€ê²©</th>
                    </tr>
                </thead>
                <tbody>
                    {% for culture_center in culture_center_data %}
                    <tr>
                        <td data-label="ì¥ì†Œ">
                            <a href="{{ culture_center.ë§í¬ }}" target="_blank">{{ culture_center.ì¥ì†Œ }}</a>
                        </td>
                        <td data-label="ì•Œì§œ íŒ" class="pre-wrap">{{ culture_center["ì•Œì§œ íŒ"] }}</td>
                        <td data-label="ë‚˜ì´">{{ culture_center.ë‚˜ì´ }}</td>
                        <td data-label="ì¢…ë¥˜">{{ culture_center.ì¢…ë¥˜ }}</td>
                        <td data-label="ê°€ê²©">{{ culture_center.ê°€ê²© }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="5">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    <section id="forest" class="content-section" style="display: none;">
        <div class="search-container">
            <input type="text" id="forest-search" class="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />
            <button class="search-button" onclick="filterTableWithButton('forest-table', 'forest-search')">
                ğŸ”
            </button>
        </div>

        <div class="table-container">
            <table id="forest-table">
                <thead>
                    <tr>
                        <th>ì§€ì—­</th>
                        <th>ì¥ì†Œ</th>
                        <th>ê´€ë¦¬ì£¼ì²´</th>
                    </tr>
                </thead>
                <tbody>
                    {% for forest in forest_data %}
                    <tr>
                        <td data-label="ì§€ì—­">{{ forest.ì§€ì—­ }}</td>
                        <td data-label="ì¥ì†Œ">{{ forest.ì¥ì†Œ }}</td>
                        <td data-label="ê´€ë¦¬ì£¼ì²´">{{ forest.ê´€ë¦¬ì£¼ì²´ }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="3">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    <!-- ë¬¸ì˜ ì„¹ì…˜ -->
    <section id="contact" class="content-section" style="display: none;">
        <form id="inquiryForm">
            <label for="name">ì´ë¦„</label>
            <input type="text" id="name" name="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
            
            <label for="message">ë¬¸ì˜ ë‚´ìš©</label>
            <textarea id="message" name="message" placeholder="ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" rows="5" required></textarea>
            
            <button type="submit">ë¬¸ì˜í•˜ê¸°</button>
        </form>
    </section>
    
    <script>
        // ë¬¸ì˜ í¼ ì œì¶œ ì²˜ë¦¬
        document.getElementById('inquiryForm').addEventListener('submit', async function(event) {
            event.preventDefault();
    
            const data = {
                name: document.getElementById('name').value,
                message: document.getElementById('message').value
            };
    
            try {
                const response = await fetch('/api/inquiries', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
    
                const result = await response.json();
                if (response.ok) {
                    alert(result.message);
                    document.getElementById('inquiryForm').reset();
                } else {
                    alert(result.error || 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                alert('ì„œë²„ì™€ ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        });
    </script>    

    <!-- JavaScript íŒŒì¼ ì—°ê²° -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>

    <!-- Service Worker ë“±ë¡ -->
    <script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js')
        .then(function(registration) {
            console.log('Service Worker registered with scope:', registration.scope);
        }).catch(function(error) {
            console.log('Service Worker registration failed:', error);
        });
    }
    </script>
</body>
</html>
